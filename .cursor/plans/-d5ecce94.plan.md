---
name: پلان رفع باگ‌های پنل کاربری
overview: ""
todos:
  - id: 5380b01b-6df7-41f4-92de-a3d7c08dc96f
    content: حذف دکمه‌های شبکه‌های اجتماعی از login.html
    status: completed
  - id: ff04f60f-2aaf-431e-bbff-1d5dca83baea
    content: حذف آیکون اضافی در فیلد پسورد login.html
    status: completed
  - id: 3eafb0ad-663c-4753-900a-981daab25ff0
    content: رفع overlap placeholder و آیکون تلفن در login.html
    status: completed
  - id: 99a41ac4-8bce-4b36-a7bd-b4d2dc838f07
    content: رفع مشکل encoding در پیام‌های خطای login.html
    status: completed
  - id: 0837943a-46e1-4df8-9f14-af631157ffaa
    content: اتصال لینک قوانین و مقررات به terms-and-rules.html
    status: completed
  - id: 22451357-2846-4cce-be58-35bdeaafdafd
    content: حذف کد JavaScript تکراری از register.html
    status: completed
  - id: 5679df26-bb59-4cea-8422-cbd5f8b68ae9
    content: رفع overlap در register.html
    status: completed
  - id: bedc03cc-e4eb-445a-9c31-9f4894f576f7
    content: رفع مشکل autofill گوگل در register.html
    status: completed
  - id: 17b402b7-4c57-4861-a3eb-8176e69afd7a
    content: اتصال نوار جستجو در user-panel-index.html
    status: completed
  - id: 33035ce7-6a2d-4505-a7d4-9291fe0011bc
    content: اتصال دکمه‌های حذف notification/message slidebar
    status: completed
  - id: 171a29dd-4f7d-4553-93f2-526ea6a9fd31
    content: رفع profile dropdown در تمام صفحات user panel
    status: completed
  - id: f97aec80-c723-450f-9f2c-baba4fb4828d
    content: اتصال تمام لینک‌های href="#" به صفحات مناسب
    status: completed
  - id: 899fd12e-3aef-4e81-8529-82dddd0f362a
    content: جایگزینی مقادیر hardcoded با داده‌های API
    status: completed
  - id: a030fb39-8e85-4e5c-b9c8-0d63d16cabae
    content: پیاده‌سازی pagination در صفحات order و favorite
    status: completed
  - id: 67328044-17bd-4207-a4e1-4af2ef1b2701
    content: حذف بخش‌های غیرضروری از صفحات user panel
    status: completed
  - id: bff5a57a-19e1-4f1e-ac19-e7d3ac8466f1
    content: رفع kickout bug با بهبود token refresh
    status: completed
  - id: cab4c0c0-778a-4b69-9224-a2340a19a5be
    content: رفع ID mismatch با اتصال به API user profile
    status: completed
  - id: c80abb05-6fff-4784-900e-c8e7a9365896
    content: بهبود error handling برای جلوگیری از ارورهای ناپدیدشونده
    status: completed
  - id: 847fec40-6d36-4f7b-936b-68376635d780
    content: حذف دکمه‌های شبکه‌های اجتماعی از login.html
    status: completed
  - id: be54f69d-06ff-42db-b9c5-e884820b3faf
    content: حذف آیکون اضافی در فیلد پسورد login.html
    status: completed
  - id: c774e1f3-bb05-45c7-9544-8f29c2c191b7
    content: حذف دکمه‌های شبکه‌های اجتماعی از login.html
    status: completed
  - id: 4955e643-7a40-4944-88e2-e706b20d96e6
    content: حذف آیکون اضافی در فیلد پسورد login.html
    status: completed
  - id: 59e5fe3b-9f68-4a4a-b62c-e945eb400e42
    content: رفع overlap placeholder و آیکون تلفن در login.html
    status: completed
  - id: a227009e-ac1f-42f2-bf74-341bb1ff6209
    content: رفع مشکل encoding در پیام‌های خطای login.html
    status: completed
  - id: fbb27629-012a-4172-bdcc-0d3f72ea5ec9
    content: اتصال لینک قوانین و مقررات به terms-and-rules.html
    status: completed
  - id: c07f1004-ff5a-4e11-aa01-c584531b3bae
    content: حذف کد JavaScript تکراری از register.html
    status: completed
  - id: c0354143-a279-4948-b2d2-e2a1e37e8f1d
    content: رفع overlap در register.html
    status: completed
  - id: c5d82261-33ca-4b5b-a49c-9c0c6f7bda17
    content: رفع مشکل autofill گوگل در register.html
    status: completed
  - id: d28f3ee1-3463-4961-85f3-fa622be11389
    content: اتصال نوار جستجو در user-panel-index.html
    status: completed
  - id: 85f4cbad-521d-4516-abc3-a171cac43a7b
    content: اتصال دکمه‌های حذف notification/message slidebar
    status: completed
  - id: 24a9ab8e-ab94-4e85-9816-a5ec38477ed4
    content: رفع profile dropdown در تمام صفحات user panel
    status: completed
  - id: 4a727a48-a86a-47e8-b7f2-12ca9bdfccf3
    content: اتصال تمام لینک‌های href="#" به صفحات مناسب
    status: completed
  - id: 9a8505d8-1f05-4d89-a68c-6a450a225ddc
    content: جایگزینی مقادیر hardcoded با داده‌های API
    status: completed
  - id: 6c7a40d0-b58c-4e2c-80f9-d0625ad89c6f
    content: پیاده‌سازی pagination در صفحات order و favorite
    status: completed
  - id: 8f6a1b20-2368-4520-9fea-5208024cedf4
    content: حذف بخش‌های غیرضروری از صفحات user panel
    status: completed
  - id: ef5ebdb6-c561-4779-9e6f-2a1b3b67869e
    content: رفع kickout bug با بهبود token refresh
    status: completed
  - id: 7e8e0897-afe4-4146-ade7-a31a8f892262
    content: رفع ID mismatch با اتصال به API user profile
    status: completed
  - id: a3846c4c-5178-427c-9a4b-e7695df92ce7
    content: بهبود error handling برای جلوگیری از ارورهای ناپدیدشونده
    status: completed
  - id: cd8aa6d3-a8c5-482a-85ef-38148088b1d7
    content: تغییر عنوان صفحه و meta tags در user-panel-index.html (خط 1-21)
    status: pending
  - id: 66ad94c2-0a1b-4809-b5ee-24fc470f21f4
    content: پیاده‌سازی عملکرد نوار جستجو در user-panel-index.html (خط 486)
    status: pending
  - id: a93c4538-e0a6-4377-a5b4-17cedfbcf373
    content: پیاده‌سازی دکمه حذف در sidebar اعلان‌ها در user-panel-index.html (خط 1255-1329)
    status: pending
  - id: 3b605991-83c9-428c-b41c-2b2f3f2309be
    content: پیاده‌سازی دکمه حذف در sidebar پیام‌ها در user-panel-index.html (خط 1173-1251)
    status: pending
  - id: 459c3100-b9fc-4a7b-9257-68b559142d05
    content: اصلاح تمام لینک‌های href="#" در user-panel-index.html (خطوط 586-593, 538-547, 549-560, 562-575, 632, 650, 777-778, 808, 827, 846, 863-864)
    status: pending
  - id: 52688473-4c90-4463-9d07-77bd1d205a9e
    content: رفع مشکل overlap در آیکون تنظیمات در user-panel-index.html (خط 550-551)
    status: pending
  - id: e842a58e-290d-4893-868e-9b30db9e403a
    content: اصلاح theme scrollbar در user-panel-index.html
    status: pending
  - id: 6eb55329-bf90-408a-b252-bcdc8e946acc
    content: حذف div های غیرضروری در user-panel-index.html (خطوط 598-616, 654-675, 678-772)
    status: pending
  - id: c6dbaca3-b52f-4473-9b23-9d4d64e651f7
    content: اصلاح لینک‌های محصولات که 404 می‌دهند در user-panel-index.html (خط 870-1170)
    status: pending
  - id: c2296be5-7e00-45b3-b960-e693851ea463
    content: رفع مشکل ID mismatch در user-panel-index.html (خط 528, 583, 452)
    status: pending
  - id: 8d821908-7d87-400b-8ef7-31782d232426
    content: رفع باگ kickout در user-panel-profile.html (بررسی auth-guard.js)
    status: pending
  - id: 74718112-6f2c-4e29-939a-cae08f702404
    content: رفع باگ dashboard در user-panel-profile.html (خط 44-54)
    status: pending
  - id: 649e03b4-f71d-4d1c-8091-5de9c6113d5e
    content: رفع خطای unknown در script بخش user-panel-profile.html
    status: pending
  - id: 0281dcdc-b150-413f-9b14-51e8adbfaa60
    content: رفع مشکل dropdown پروفایل در user-panel-profile.html (خط 535-537)
    status: pending
  - id: 90f283d1-bf7a-4415-a6a2-39c662f8a502
    content: اصلاح لینک جستجو در user-panel-profile.html (خط 587-592)
    status: pending
  - id: 4585b8ad-f02e-4e85-8f0b-ebbe87e38375
    content: حذف div غیرضروری در user-panel-profile.html (خط 671-716)
    status: pending
  - id: 42934dc4-16de-44e4-a8a1-34aa37affd09
    content: بارگذاری داده‌های واقعی از API به جای مقادیر hardcoded در user-panel-profile.html (خطوط 629-655)
    status: pending
  - id: f5612310-30c0-4f23-a5ca-e24cf3e32095
    content: رفع مشکل فیلدهای فرم در user-panel-profile.html (خطوط 616-624, 657-660)
    status: pending
  - id: e3abe3e2-bc5d-449b-9331-3f045e20aa77
    content: رفع خطای unknown در script بخش user-panel-order.html
    status: pending
  - id: 859f0e48-8ba3-45ae-b5f3-d5c001be4fab
    content: حذف بخش فیلتر در user-panel-order.html (خط 580-636)
    status: pending
  - id: 7bf77ade-61b1-44bb-903d-32e1df43a308
    content: رفع مشکل جدول سفارش‌ها در user-panel-order.html (خطوط 642-767)
    status: pending
  - id: cfbfb353-2758-4fde-b8e9-2ff5cf8235f9
    content: پیاده‌سازی pagination در user-panel-order.html (خط 771-785)
    status: pending
  - id: d7b32514-209a-4814-898b-dd898eee5988
    content: حذف بخش‌های غیرضروری در user-panel-order.html (خطوط 789-798, 800-833)
    status: pending
  - id: b4308232-3e6d-4bb8-b38c-5addccbba784
    content: رفع باگ kickout در user-panel-order.html (بررسی auth-guard.js)
    status: pending
  - id: 0f66af6d-0704-426e-908b-0ce411da0e48
    content: اصلاح لینک جستجو در user-panel-favorite.html (خط 587-592)
    status: pending
  - id: 4158611e-a662-4014-912f-8361feeb8097
    content: اصلاح لینک سفارش‌ها در user-panel-favorite.html (خط 593-598)
    status: pending
  - id: eba30856-f653-4af9-abfc-131a62a09619
    content: پیاده‌سازی بخش فیلتر و مرتب‌سازی در user-panel-favorite.html (خط 602-651)
    status: pending
  - id: 52369eee-bcce-4817-9a29-7de788035894
    content: رفع مشکل نمایش محصولات در user-panel-favorite.html (خطوط 680-771)
    status: pending
  - id: 69861d40-75ea-4b22-8d34-ba3984f52a09
    content: پیاده‌سازی دکمه‌های محصولات در user-panel-favorite.html
    status: pending
  - id: 2f3bc96e-2704-4295-bff0-057270a65f26
    content: پیاده‌سازی pagination در user-panel-favorite.html (خط 798-824)
    status: pending
  - id: 37b3bd65-e250-43d0-8ee7-b8b8d235f0bf
    content: رفع خطای unknown در script بخش user-panel-favorite.html
    status: pending
  - id: ce2f792d-28ca-4295-88a0-7687c1d73fbb
    content: رفع مشکل بخش محصولات پیشنهادی در user-panel-favorite.html (خط 828-1140)
    status: pending
  - id: 8672e373-7012-4d00-988a-5fdfcb4c8ce4
    content: بررسی و اصلاح auth-guard.js برای رفع مشکل kickout
    status: pending
  - id: 979524bd-c84f-4329-8402-dcb9cee51dfa
    content: همگام‌سازی فایل‌های تغییر یافته با wwwroot/fa
    status: pending
---

# پلان رفع باگ‌های پنل کاربری

## 1. رفع باگ‌های user-panel-index.html

### 1.1. مشکلات عنوان و آدرس بار
- **فایل**: `presentation/user-panel-index.html`
- **مشکل**: عنوان صفحه و آدرس بار نیاز به تنظیم دارند
- **راه‌حل**: تغییر `<title>` و `<meta>` tags در بخش `<head>`

### 1.2. نوار جستجو
- **فایل**: `presentation/user-panel-index.html` (خط 486)
- **مشکل**: نوار جستجو کار نمی‌کند
- **راه‌حل**: اضافه کردن event listener برای `searchButton` و `searchInput`

### 1.3. دکمه حذف در sidebar اعلان‌ها
- **فایل**: `presentation/user-panel-index.html` (خط 1255-1329)
- **مشکل**: دکمه حذف در منوی اعلان‌ها کار نمی‌کند
- **راه‌حل**: پیاده‌سازی تابع حذف اعلان

### 1.4. دکمه حذف در sidebar پیام‌ها
- **فایل**: `presentation/user-panel-index.html` (خط 1173-1251)
- **مشکل**: دکمه حذف در منوی پیام‌ها کار نمی‌کند
- **راه‌حل**: پیاده‌سازی تابع حذف پیام

### 1.5. لینک‌های غیرفعال (href="#")
- **فایل**: `presentation/user-panel-index.html`
- **مشکل**: لینک‌های متعدد با `href="#"` کار نمی‌کنند
- **راه‌حل**: 
  - خط 586-593: لینک جستجو
  - خط 538-547: لینک پروفایل در dropdown
  - خط 549-560: لینک تنظیمات در dropdown
  - خط 562-575: لینک خروج در dropdown
  - خط 632: لینک سفارش‌ها
  - خط 650: لینک آدرس‌ها
  - خط 777-778: لینک مشاهده همه سفارش‌ها
  - خط 808, 827, 846: لینک‌های سفارش‌ها
  - خط 863-864: لینک محصولات پیشنهادی

### 1.6. مشکل overlap در آیکون تنظیمات
- **فایل**: `presentation/user-panel-index.html` (خط 550-551)
- **مشکل**: آیکون تنظیمات overlap دارد
- **راه‌حل**: اصلاح CSS positioning

### 1.7. مشکل theme در scrollbar
- **فایل**: `presentation/user-panel-index.html`
- **مشکل**: scrollbar با theme هماهنگ نیست
- **راه‌حل**: اضافه کردن CSS برای scrollbar در dark mode

### 1.8. حذف div های غیرضروری
- **فایل**: `presentation/user-panel-index.html`
- **مشکل**: چند div غیرضروری وجود دارد
- **راه‌حل**: 
  - خط 598-616: div جستجو
  - خط 654-675: div اضافی
  - خط 678-772: div چارت و تراکنش‌ها
  - خط 859-1170: div محصولات پیشنهادی (یا اصلاح)

### 1.9. لینک‌های محصولات (404)
- **فایل**: `presentation/user-panel-index.html` (خط 870-1170)
- **مشکل**: لینک‌های محصولات به `/product/...` می‌روند که 404 می‌دهد
- **راه‌حل**: اصلاح مسیر لینک‌های محصولات

### 1.10. مشکل ID mismatch
- **فایل**: `presentation/user-panel-index.html` (خط 528, 583, 452)
- **مشکل**: ID های تکراری یا نامناسب
- **راه‌حل**: بررسی و اصلاح ID های تکراری

## 2. رفع باگ‌های user-panel-profile.html

### 2.1. باگ kickout (session timeout)
- **فایل**: `presentation/user-panel-profile.html`
- **مشکل**: کاربر بعد از 3 دقیقه و 49 ثانیه از سیستم خارج می‌شود
- **راه‌حل**: بررسی و اصلاح `auth-guard.js` و تنظیمات session timeout

### 2.2. باگ dashboard
- **فایل**: `presentation/user-panel-profile.html` (خط 44-54)
- **مشکل**: مشکل در نمایش اطلاعات dashboard
- **راه‌حل**: بررسی و اصلاح کد JavaScript مربوط به dashboard

### 2.3. خطای unknown در script
- **فایل**: `presentation/user-panel-profile.html` (بخش script)
- **مشکل**: خطای JavaScript در console
- **راه‌حل**: بررسی console errors و رفع آن‌ها

### 2.4. مشکل dropdown پروفایل
- **فایل**: `presentation/user-panel-profile.html` (خط 535-537)
- **مشکل**: dropdown پروفایل درست کار نمی‌کند
- **راه‌حل**: بررسی و اصلاح تابع `toggleUserDropdown`

### 2.5. لینک جستجو
- **فایل**: `presentation/user-panel-profile.html` (خط 587-592)
- **مشکل**: لینک جستجو کار نمی‌کند
- **راه‌حل**: اضافه کردن event listener

### 2.6. حذف div غیرضروری
- **فایل**: `presentation/user-panel-profile.html` (خط 671-716)
- **مشکل**: div غیرضروری وجود دارد
- **راه‌حل**: حذف div

### 2.7. مقادیر hardcoded در فرم
- **فایل**: `presentation/user-panel-profile.html`
- **مشکل**: فیلدهای فرم با مقادیر hardcoded پر شده‌اند
- **راه‌حل**: 
  - خط 629-632: نام
  - خط 633-636: نام خانوادگی
  - خط 638-641: ایمیل
  - خط 643-646: موبایل
  - خط 647-650: تاریخ تولد
  - خط 652-655: کد ملی
- **راه‌حل**: بارگذاری داده‌های واقعی از API

### 2.8. مشکل فیلدهای فرم
- **فایل**: `presentation/user-panel-profile.html`
- **مشکل**: 
  - خط 657-660: فیلد آدرس کار نمی‌کند
  - خط 622-624: فیلد کد پستی کار نمی‌کند
  - خط 616-621: فیلد شهر کار نمی‌کند
- **راه‌حل**: بررسی و اصلاح validation و submit handler

## 3. رفع باگ‌های user-panel-order.html

### 3.1. خطای unknown در script
- **فایل**: `presentation/user-panel-order.html` (بخش script)
- **مشکل**: خطای JavaScript در console
- **راه‌حل**: بررسی console errors و رفع آن‌ها

### 3.2. حذف بخش فیلتر
- **فایل**: `presentation/user-panel-order.html` (خط 580-636)
- **مشکل**: بخش فیلتر غیرضروری است
- **راه‌حل**: حذف div فیلتر

### 3.3. مشکل جدول سفارش‌ها
- **فایل**: `presentation/user-panel-order.html` (خط 642-767)
- **مشکل**: 
  - خط 642: عنوان جدول
  - خط 643: ستون تاریخ
  - خط 644: ستون مبلغ
  - خط 658-767: مشکل در `<tbody>` و نمایش داده‌ها
- **راه‌حل**: بررسی و اصلاح ساختار جدول و JavaScript مربوط به بارگذاری داده‌ها

### 3.4. مشکل pagination
- **فایل**: `presentation/user-panel-order.html` (خط 771-785)
- **مشکل**: pagination کار نمی‌کند
- **راه‌حل**: پیاده‌سازی pagination با JavaScript

### 3.5. حذف بخش‌های غیرضروری
- **فایل**: `presentation/user-panel-order.html`
- **مشکل**: 
  - خط 789-798: بخش Order tracking
  - خط 800-833: بخش Order status guide
- **راه‌حل**: حذف این بخش‌ها

### 3.6. باگ kickout
- **فایل**: `presentation/user-panel-order.html`
- **مشکل**: کاربر بعد از 1 دقیقه و 40 ثانیه از سیستم خارج می‌شود
- **راه‌حل**: بررسی و اصلاح `auth-guard.js`

## 4. رفع باگ‌های user-panel-favorite.html

### 4.1. مشکل لینک جستجو
- **فایل**: `presentation/user-panel-favorite.html` (خط 587-592)
- **مشکل**: لینک جستجو کار نمی‌کند
- **راه‌حل**: اضافه کردن event listener

### 4.2. مشکل لینک سفارش‌ها
- **فایل**: `presentation/user-panel-favorite.html` (خط 593-598)
- **مشکل**: لینک سفارش‌ها کار نمی‌کند
- **راه‌حل**: اصلاح href

### 4.3. مشکل بخش فیلتر و مرتب‌سازی
- **فایل**: `presentation/user-panel-favorite.html` (خط 602-651)
- **مشکل**: بخش فیلتر و مرتب‌سازی کار نمی‌کند
- **راه‌حل**: پیاده‌سازی JavaScript برای فیلتر و مرتب‌سازی

### 4.4. مشکل نمایش محصولات
- **فایل**: `presentation/user-panel-favorite.html`
- **مشکل**: 
  - خط 680-686: محصول 1
  - خط 721-728: محصول 2
  - خط 761-767: محصول 3
  - خط 694, 734, 744: مشکل در badge موجودی
  - خط 690-691, 731, 771: مشکل در نمایش نام محصول
- **راه‌حل**: بارگذاری داده‌های واقعی از API و اصلاح template

### 4.5. مشکل دکمه‌های محصولات
- **فایل**: `presentation/user-panel-favorite.html`
- **مشکل**: دکمه‌های محصولات (افزودن به سبد، حذف از علاقه‌مندی) کار نمی‌کنند
- **راه‌حل**: پیاده‌سازی event handlers

### 4.6. مشکل pagination
- **فایل**: `presentation/user-panel-favorite.html` (خط 798-824)
- **مشکل**: pagination کار نمی‌کند
- **راه‌حل**: پیاده‌سازی pagination با JavaScript

### 4.7. خطای unknown در script
- **فایل**: `presentation/user-panel-favorite.html` (بخش script)
- **مشکل**: خطای JavaScript در console
- **راه‌حل**: بررسی console errors و رفع آن‌ها

### 4.8. مشکل بخش محصولات پیشنهادی
- **فایل**: `presentation/user-panel-favorite.html` (خط 828-1140)
- **مشکل**: 
  - بخش محصولات پیشنهادی نیاز به اصلاح دارد
  - لینک‌ها با `href="#"` کار نمی‌کنند
  - لینک‌های محصولات به `/product/...` می‌روند که 404 می‌دهد
- **راه‌حل**: اصلاح لینک‌ها و بارگذاری داده‌های واقعی

## 5. اقدامات عمومی

### 5.1. بررسی auth-guard.js
- **فایل**: `presentation/assets/js/auth-guard.js`
- **مشکل**: مشکل kickout در چند صفحه
- **راه‌حل**: بررسی و اصلاح session timeout و token refresh logic

### 5.2. همگام‌سازی فایل‌ها
- **فایل**: همه فایل‌های تغییر یافته
- **راه‌حل**: اجرای `scripts/sync-frontend.ps1` برای همگام‌سازی با `wwwroot/fa`