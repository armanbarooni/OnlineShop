<!doctype html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ظ‚ط§ظ„ط¨ ظپط±ط´ع¯ط§ظ‡غŒ ط¢ط±غŒظ†ظˆ</title>
    <meta name="description" content="ظ‚ط§ظ„ط¨ ظپط±ط´ع¯ط§ظ‡غŒ ط¢ط±غŒظ†ظˆطŒ ط¨ظ‡طھط±غŒظ† ظ‚ط§ظ„ط¨ ط¨ط±ط§غŒ ظپط±ظˆط´ع¯ط§ظ‡â€Œظ‡ط§غŒ ط§غŒظ†طھط±ظ†طھغŒ ط¨ط§ ط·ط±ط§ط­غŒ ظ…ط¯ط±ظ† ظˆ ظˆط§ع©ظ†ط´â€Œع¯ط±ط§.">
    <meta name="keywords" content="ظ‚ط§ظ„ط¨ ظپط±ظˆط´ع¯ط§ظ‡غŒ, ظ‚ط§ظ„ط¨ ط¢ط±غŒظ†ظˆ, ظپط±ظˆط´ع¯ط§ظ‡ ط§غŒظ†طھط±ظ†طھغŒ, ط·ط±ط§ط­غŒ ظˆط§ع©ظ†ط´â€Œع¯ط±ط§">
    <meta name="robots" content="index, follow">
    <meta name="author" content="ط¢ط±غŒظ†ظˆ">
    <meta name="copyright" content="طھظ…ط§ظ…غŒ ط­ظ‚ظˆظ‚ ظ…طھط¹ظ„ظ‚ ط¨ظ‡ ط¢ط±غŒظ†ظˆ ط§ط³طھ.">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon_io/favicon-16x16.png">
    <link rel="canonical" href="https://example.com/your-page-url">
    <link rel="stylesheet" href="assets/js/plugin/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="assets/css/app.css">
    <link rel="preload" href="assets/fonts/payda/PeydaWebFaNum-Medium.woff2" as="font" type="font/woff2" crossorigin>

</head>
<body class="bg-light dark:bg-zinc-900 text-text-primary-light dark:text-text-primary-dark transition-colors duration-200">

<div class="min-h-screen flex flex-col lg:flex-row">
    <!-- Image section -->
    <div class="lg:w-1/2 auth-bg relative hidden lg:flex items-center justify-center p-12">
        <div class="absolute inset-0 bg-black/30 dark:bg-black/50"></div>
        <div class="relative z-10 text-white text-center max-w-md">
            <div class="w-20 h-20 rounded-xl bg-primary-grad flex items-center justify-center mx-auto mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                </svg>
            </div>
            <h2 class="text-3xl font-bold mb-4">ط¨ظ‡ ط³ط§غŒطھ ظ…ط§ ط®ظˆط´ ط¢ظ…ط¯غŒط¯</h2>
            <p class="text-lg mb-6">ط¨ط§ ط«ط¨طھ ظ†ط§ظ… ط¯ط± ط¢ط±غŒظ†ظˆ ع©ط§ظ„ط§ ط§ط² ط¨ظ‡طھط±غŒظ† طھط¬ط±ط¨ظ‡ ط®ط±غŒط¯ ط¢ظ†ظ„ط§غŒظ† ظ„ط°طھ ط¨ط¨ط±غŒط¯. ط¯ط³طھط±ط³غŒ ط¨ظ‡ ظ‡ط²ط§ط±ط§ظ† ظ…ط­طµظˆظ„ ط¨ط§ ع©غŒظپغŒطھ ظˆ ظ‚غŒظ…طھ ظ…ظ†ط§ط³ط¨.</p>
        </div>
    </div>

    <!-- Registration form section -->
    <div class="lg:w-1/2 flex items-center justify-center p-6">
        <div class="w-full max-w-md">
            <!-- Mobile logo -->
            <div class="flex items-center justify-center mb-8 lg:hidden">
                <div class="w-12 h-12 rounded-md bg-primary-grad flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                </div>
                <h1 class="ms-3 text-xl font-bold text-dark dark:text-light">ظ‚ط§ظ„ط¨ <span class="text-primary">ط¢ط±غŒظ†ظˆ </span></h1>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-soft dark:shadow-soft-dark p-8 border border-gray-100 dark:border-gray-700">
                <!-- Step indicator -->
                <div class="step-indicator">
                    <div class="step-circle active" data-step="1">1</div>
                    <div class="step-line active"></div>
                    <div class="step-circle inactive" data-step="2">2</div>
                    <div class="step-line"></div>
                    <div class="step-circle inactive" data-step="3">3</div>
                </div>

                <!-- Step 1 - Personal Information -->
                <div class="step active" id="step1">
                    <div class="text-center mb-6">
                        <h2 class="text-2xl font-bold text-dark dark:text-light mb-2">ط§ط·ظ„ط§ط¹ط§طھ ط´ط®طµغŒ</h2>
                        <p class="text-gray-500 dark:text-gray-400">ظ„ط·ظپط§ ط§ط·ظ„ط§ط¹ط§طھ ط´ط®طµغŒ ط®ظˆط¯ ط±ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯</p>
                    </div>

                    <form class="space-y-5">
                        <!-- First and Last Name -->
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="first-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ظ†ط§ظ…</label>
                                <div class="relative">
                                    <input type="text" id="first-name" class="w-full ps-4 pe-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="ظ†ط§ظ… ط®ظˆط¯ ط±ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯" required autocomplete="off" data-placeholder="ظ†ط§ظ… ط®ظˆط¯ ط±ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯">
                                    <div class="absolute input-icon top-1/2 transform -translate-y-1/2 text-gray-400">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="last-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ظ†ط§ظ… ط®ط§ظ†ظˆط§ط¯ع¯غŒ</label>
                                <div class="relative">
                                    <input type="text" id="last-name" class="w-full ps-4 pe-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="ظ†ط§ظ… ط®ط§ظ†ظˆط§ط¯ع¯غŒ ط®ظˆط¯ ط±ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯" required autocomplete="off" data-placeholder="ظ†ط§ظ… ط®ط§ظ†ظˆط§ط¯ع¯غŒ ط®ظˆط¯ ط±ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯">
                                    <div class="absolute input-icon top-1/2 transform -translate-y-1/2 text-gray-400">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Mobile -->
                        <div>
                            <label for="mobile" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ط´ظ…ط§ط±ظ‡ ظ…ظˆط¨ط§غŒظ„</label>
                            <div class="relative">
                                <input type="tel" id="mobile" class="w-full ps-4 pe-10 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="09xxxxxxxxx" required autocomplete="off" data-placeholder="09xxxxxxxxx">
                                <div class="absolute input-icon top-1/2 transform -translate-y-1/2 text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                    </svg>
                                </div>
                            </div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">ع©ط¯ طھط§غŒغŒط¯ ط¨ظ‡ ط§غŒظ† ط´ظ…ط§ط±ظ‡ ط§ط±ط³ط§ظ„ ط®ظˆط§ظ‡ط¯ ط´ط¯</p>
                        </div>

                        <!-- Continue button -->
                        <div class="pt-4">
                            <button type="button" onclick="nextStep(1, 2)" class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary dark:bg-primary-dark hover:bg-primary/90 dark:hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors">
                                ظ…ط±ط­ظ„ظ‡ ط¨ط¹ط¯
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 ms-2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                                </svg>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 2 - Account Information -->
                <div class="step" id="step2">
                    <div class="text-center mb-6">
                        <h2 class="text-2xl font-bold text-dark dark:text-light mb-2">ط§ط·ظ„ط§ط¹ط§طھ ط­ط³ط§ط¨ ع©ط§ط±ط¨ط±غŒ</h2>
                        <p class="text-gray-500 dark:text-gray-400">ظ„ط·ظپط§ ط§ط·ظ„ط§ط¹ط§طھ ظˆط±ظˆط¯ ط®ظˆط¯ ط±ط§ طھظ†ط¸غŒظ… ع©ظ†غŒط¯</p>
                    </div>

                    <form class="space-y-5">
                        <!-- Email -->
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ط§غŒظ…غŒظ„ (ط§ط®طھغŒط§ط±غŒ)</label>
                            <div class="relative">
                                <input type="email" id="email" class="w-full ps-4 pe-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="example@example.com" autocomplete="off" data-placeholder="example@example.com">
                                <div class="absolute input-icon top-1/2 transform -translate-y-1/2 text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <!-- Password -->
                        <div>
                            <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ط±ظ…ط² ط¹ط¨ظˆط±</label>
                            <div class="relative">
                                <input type="password" id="password" class="w-full ps-4 pe-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="ط±ظ…ط² ط¹ط¨ظˆط± ظ‚ظˆغŒ ط§ظ†طھط®ط§ط¨ ع©ظ†غŒط¯" required autocomplete="new-password" data-placeholder="ط±ظ…ط² ط¹ط¨ظˆط± ظ‚ظˆغŒ ط§ظ†طھط®ط§ط¨ ع©ظ†غŒط¯" oninput="checkPasswordStrength()">
                                <button type="button" class="absolute password-toggle top-1/2 transform -translate-y-1/2 text-gray-400" onclick="togglePassword('password')">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="password-strength">
                                <div class="password-strength-bar" id="password-strength-bar"></div>
                            </div>
                            <div class="password-requirements" id="password-requirements">
                                <div class="requirement" id="req-length">
                                    <span class="requirement-icon">â€¢</span>
                                    <span>ط­ط¯ط§ظ‚ظ„ غ¸ ع©ط§ط±ط§ع©طھط±</span>
                                </div>
                                <div class="requirement" id="req-uppercase">
                                    <span class="requirement-icon">â€¢</span>
                                    <span>ط­ط¯ط§ظ‚ظ„ غŒع© ط­ط±ظپ ط¨ط²ط±ع¯</span>
                                </div>
                                <div class="requirement" id="req-lowercase">
                                    <span class="requirement-icon">â€¢</span>
                                    <span>ط­ط¯ط§ظ‚ظ„ غŒع© ط­ط±ظپ ع©ظˆع†ع©</span>
                                </div>
                                <div class="requirement" id="req-number">
                                    <span class="requirement-icon">â€¢</span>
                                    <span>ط­ط¯ط§ظ‚ظ„ غŒع© ط¹ط¯ط¯</span>
                                </div>
                                <div class="requirement" id="req-special">
                                    <span class="requirement-icon">â€¢</span>
                                    <span>ط­ط¯ط§ظ‚ظ„ غŒع© ع©ط§ط±ط§ع©طھط± ط®ط§طµ (!@#$%^&*)</span>
                                </div>
                            </div>
                        </div>

                        <!-- Repeat password -->
                        <div>
                            <label for="confirm-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">طھع©ط±ط§ط± ط±ظ…ط² ط¹ط¨ظˆط±</label>
                            <div class="relative">
                                <input type="password" id="confirm-password" class="w-full ps-4 pe-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="ط±ظ…ط² ط¹ط¨ظˆط± ط±ط§ ظ…ط¬ط¯ط¯ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯" required autocomplete="new-password" data-placeholder="ط±ظ…ط² ط¹ط¨ظˆط± ط±ط§ ظ…ط¬ط¯ط¯ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯" oninput="checkPasswordMatch()">
                                <button type="button" class="absolute password-toggle top-1/2 transform -translate-y-1/2 text-gray-400" onclick="togglePassword('confirm-password')">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                    </svg>
                                </button>
                            </div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400" id="password-match-message"></p>
                        </div>

                        <!-- Step 2 buttons -->
                        <div class="pt-4 flex space-x-3">
                            <button type="button" onclick="prevStep(2, 1)" class="w-1/2 flex justify-center items-center py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ms-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                </svg>
                                ظ…ط±ط­ظ„ظ‡ ظ‚ط¨ظ„
                            </button>
                            <button type="button" onclick="nextStep(2, 3)" class="w-1/2 flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary dark:bg-primary-dark hover:bg-primary/90 dark:hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors">
                                ظ…ط±ط­ظ„ظ‡ ط¨ط¹ط¯
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 me-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Step 3 - Final Approval -->
                <div class="step" id="step3">
                    <div class="text-center mb-6">
                        <h2 class="text-2xl font-bold text-dark dark:text-light mb-2">طھط§غŒغŒط¯ ظ†ظ‡ط§غŒغŒ</h2>
                        <p class="text-gray-500 dark:text-gray-400">ظ„ط·ظپط§ ط§ط·ظ„ط§ط¹ط§طھ ط®ظˆط¯ ط±ط§ ط¨ط±ط±ط³غŒ ظˆ طھط§غŒغŒط¯ ع©ظ†غŒط¯</p>
                    </div>

                    <div class="bg-gray-50 dark:bg-zinc-900 rounded-xl p-4 mb-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">ظ†ط§ظ… ظˆ ظ†ط§ظ… ط®ط§ظ†ظˆط§ط¯ع¯غŒ:</p>
                                <p class="font-medium" id="review-name">-</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">ط´ظ…ط§ط±ظ‡ ظ…ظˆط¨ط§غŒظ„:</p>
                                <p class="font-medium" id="review-mobile">-</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">ط§غŒظ…غŒظ„:</p>
                                <p class="font-medium" id="review-email">-</p>
                            </div>
                        </div>
                    </div>

                    <!-- Rules -->
                    <div class="flex items-start mb-6">
                        <div class="flex items-center h-5">
                            <input id="terms" name="terms" type="checkbox" class="focus:ring-primary h-4 w-4 text-primary dark:text-primary-dark border-gray-300 dark:border-gray-600 rounded" required>
                        </div>
                        <div class="ms-3 text-sm">
                            <label for="terms" class="font-medium text-gray-700 dark:text-gray-300">ط¨ط§ <a href="#" class="text-primary dark:text-primary-dark hover:underline">ظ‚ظˆط§ظ†غŒظ† ظˆ ظ…ظ‚ط±ط±ط§طھ</a> ط¨ط§ط²ط§ط±ط¢ظ†ظ„ط§غŒظ† ظ…ظˆط§ظپظ‚ظ…</label>
                        </div>
                    </div>

                    <!-- Step 3 buttons -->
                    <div class="pt-4 flex space-x-3">
                        <button type="button" onclick="prevStep(3, 2)" class="w-1/2 flex justify-center items-center py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ms-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                            ظ…ط±ط­ظ„ظ‡ ظ‚ط¨ظ„
                        </button>
                        <button type="button" onclick="submitForm()" class="w-1/2 flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary dark:bg-primary-dark hover:bg-primary/90 dark:hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors">
                            ط«ط¨طھ ظ†ط§ظ…
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ms-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Login link -->
                <div class="mt-6 text-center">
                    <p class="text-sm text-gray-500 dark:text-gray-400">
                        ظ‚ط¨ظ„ط§ظ‹ ط­ط³ط§ط¨ ع©ط§ط±ط¨ط±غŒ ط¯ط§ط±غŒط¯طں
                        <a href="login.html" class="font-medium text-primary dark:text-primary-dark hover:underline">ظˆط§ط±ط¯ ط´ظˆغŒط¯</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="config.js"></script>
<script src="assets/js/utils/logger.js"></script>
<script src="assets/js/dependencies/app.js"></script>
<script src="assets/js/api-client.js"></script>
<script src="assets/js/auth-service.js"></script>
<script src="assets/js/auth-guard.js"></script>
<script src="assets/js/utils.js"></script>


<script>
    let currentStep = 1;
    let registrationData = {};
    let otpSent = false;

    // Prevent form caching and clear placeholders
    document.addEventListener('DOMContentLoaded', function() {
        // Clear all form fields on page load to prevent caching
        clearRegistrationForm();
        
        // Setup placeholder clearing on input focus
        setupPlaceholderClearing();
        
        // Prevent browser from saving form data
        document.addEventListener('submit', function(e) {
            const form = e.target;
            if (form.tagName === 'FORM') {
                form.reset();
            }
        }, true);
    });

    // Clear registration form completely
    function clearRegistrationForm() {
        document.getElementById('first-name')?.setAttribute('value', '');
        document.getElementById('last-name')?.setAttribute('value', '');
        document.getElementById('mobile')?.setAttribute('value', '');
        document.getElementById('email')?.setAttribute('value', '');
        document.getElementById('password')?.setAttribute('value', '');
        document.getElementById('confirm-password')?.setAttribute('value', '');
        document.getElementById('otp')?.setAttribute('value', '');
        document.getElementById('terms')?.removeAttribute('checked');
        
        // Clear any cached values
        if (document.getElementById('first-name')) document.getElementById('first-name').value = '';
        if (document.getElementById('last-name')) document.getElementById('last-name').value = '';
        if (document.getElementById('mobile')) document.getElementById('mobile').value = '';
        if (document.getElementById('email')) document.getElementById('email').value = '';
        if (document.getElementById('password')) document.getElementById('password').value = '';
        if (document.getElementById('confirm-password')) document.getElementById('confirm-password').value = '';
        if (document.getElementById('otp')) document.getElementById('otp').value = '';
        
        // Reset step to 1
        currentStep = 1;
        registrationData = {};
        otpSent = false;
        
        // Show step 1, hide others
        document.querySelectorAll('.step').forEach((step, index) => {
            if (index === 0) {
                step.classList.add('active');
            } else {
                step.classList.remove('active');
            }
        });
    }

    // Setup placeholder clearing when user starts typing
    function setupPlaceholderClearing() {
        const inputs = document.querySelectorAll('input[data-placeholder]');
        inputs.forEach(input => {
            const originalPlaceholder = input.getAttribute('data-placeholder');
            
            // Clear placeholder on focus
            input.addEventListener('focus', function() {
                if (this.placeholder === originalPlaceholder) {
                    this.placeholder = '';
                }
            });
            
            // Restore placeholder if field is empty on blur
            input.addEventListener('blur', function() {
                if (!this.value) {
                    this.placeholder = originalPlaceholder;
                }
            });
            
            // Clear placeholder immediately when user starts typing
            input.addEventListener('input', function() {
                if (this.placeholder && this.value) {
                    this.placeholder = '';
                }
                
                // Also clear validation errors when user starts typing
                const errorElement = this.nextElementSibling?.querySelector('.error-message') || 
                                   this.parentElement?.querySelector('.error-message') ||
                                   document.getElementById(this.id + '-error');
                if (this.classList.contains('input-error')) {
                    this.classList.remove('input-error');
                    if (errorElement) {
                        errorElement.classList.add('hidden');
                    }
                }
            });
        });
    }

    // Step change function
    function nextStep(current, next) {
        // Validate current step
        if(current === 1) {
            if (!validateStep1()) {
                return;
            }
        } else if(current === 2) {
            if (!validateStep2()) {
                return;
            }
        } else if(current === 3) {
            if (!validateStep3()) {
                return;
            }
        }

        // Hide current step
        document.getElementById(`step${current}`).classList.remove('active');

        // Show next step
        document.getElementById(`step${next}`).classList.add('active');
        currentStep = next;

        // Update step indicator
        updateStepIndicator(current, next);

        // If next step is review, show the info
        if(next === 3) {
            updateReviewSection();
        }
    }

    // Validate step 1 (Personal Info)
    function validateStep1() {
        const firstName = document.getElementById('first-name').value.trim();
        const lastName = document.getElementById('last-name').value.trim();
        const mobile = document.getElementById('mobile').value.trim();

        if(!firstName || !lastName || !mobile) {
            window.utils.showToast('ظ„ط·ظپط§ طھظ…ط§ظ… ظپغŒظ„ط¯ظ‡ط§غŒ ط§ط¬ط¨ط§ط±غŒ ط±ط§ ظ¾ط± ع©ظ†غŒط¯', 'error');
            return false;
        }

        if(!/^09\d{9}$/.test(mobile)) {
            window.utils.showToast('ظ„ط·ظپط§ ط´ظ…ط§ط±ظ‡ ظ…ظˆط¨ط§غŒظ„ ظ…ط¹طھط¨ط± ظˆط§ط±ط¯ ع©ظ†غŒط¯', 'error');
            return false;
        }

        // Store data
        registrationData.firstName = firstName;
        registrationData.lastName = lastName;
        registrationData.mobile = mobile;

        return true;
    }

    // Validate step 2 (Password)
    function validateStep2() {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirm-password').value;

        if(!password || !confirmPassword) {
            window.utils.showToast('ظ„ط·ظپط§ ط±ظ…ط² ط¹ط¨ظˆط± ظˆ طھع©ط±ط§ط± ط¢ظ† ط±ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯', 'error');
            return false;
        }

        if(password !== confirmPassword) {
            window.utils.showToast('ط±ظ…ط² ط¹ط¨ظˆط± ظˆ طھع©ط±ط§ط± ط¢ظ† ظ…ط·ط§ط¨ظ‚طھ ظ†ط¯ط§ط±ظ†ط¯', 'error');
            return false;
        }

        // Check password strength
        const strength = checkPasswordStrength(true);
        if(strength < 3) {
            window.utils.showToast('ظ„ط·ظپط§ ط±ظ…ط² ط¹ط¨ظˆط± ظ‚ظˆغŒâ€Œطھط±غŒ ط§ظ†طھط®ط§ط¨ ع©ظ†غŒط¯', 'error');
            return false;
        }

        // Store data
        registrationData.password = password;

        return true;
    }

    // Validate step 3 (OTP Verification)
    function validateStep3() {
        const otp = document.getElementById('otp').value.trim();

        if(!otp || otp.length !== 6) {
            window.utils.showToast('ظ„ط·ظپط§ ع©ط¯ طھط§غŒغŒط¯ غ¶ ط±ظ‚ظ…غŒ ط±ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯', 'error');
            return false;
        }

        if(!/^\d{6}$/.test(otp)) {
            window.utils.showToast('ع©ط¯ طھط§غŒغŒط¯ ط¨ط§غŒط¯ ط´ط§ظ…ظ„ غ¶ ط±ظ‚ظ… ط¨ط§ط´ط¯', 'error');
            return false;
        }

        registrationData.otp = otp;

        return true;
    }

    // Send OTP
    async function sendOTP() {
        if (!validateStep1()) {
            return;
        }

        try {
            const submitButton = document.getElementById('sendOtpButton');
            window.utils.showLoading(submitButton, 'ط¯ط± ط­ط§ظ„ ط§ط±ط³ط§ظ„...');

            const response = await window.authService.sendOtp(registrationData.mobile, 'register');
            
            if (response.success) {
                window.utils.showToast('ع©ط¯ طھط§غŒغŒط¯ ط§ط±ط³ط§ظ„ ط´ط¯', 'success');
                otpSent = true;
                startOtpTimer();
            } else {
                window.utils.showToast(response.error || 'ط®ط·ط§ ط¯ط± ط§ط±ط³ط§ظ„ ع©ط¯ طھط§غŒغŒط¯', 'error');
            }
        } catch (error) {
            console.error('Error sending OTP:', error);
            window.utils.showToast('ط®ط·ط§ ط¯ط± ط§طھطµط§ظ„ ط¨ظ‡ ط³ط±ظˆط±', 'error');
        } finally {
            const submitButton = document.getElementById('sendOtpButton');
            window.utils.hideLoading(submitButton);
        }
    }

    // Start OTP timer
    function startOtpTimer() {
        let timeLeft = 120; // 2 minutes
        const timerElement = document.getElementById('otpTimer');
        const resendButton = document.getElementById('resendOtpButton');

        const timer = setInterval(() => {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            
            timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft <= 0) {
                clearInterval(timer);
                timerElement.style.display = 'none';
                resendButton.style.display = 'inline-block';
            }
            
            timeLeft--;
        }, 1000);
    }

    // Resend OTP
    async function resendOTP() {
        await sendOTP();
    }

    // Complete registration
    async function completeRegistration() {
        if (!validateStep3()) {
            return;
        }

        try {
            const submitButton = document.getElementById('completeRegistrationButton');
            window.utils.showLoading(submitButton, 'ط¯ط± ط­ط§ظ„ ط«ط¨طھâ€Œظ†ط§ظ…...');

            const response = await window.authService.registerWithPhone({
                firstName: registrationData.firstName,
                lastName: registrationData.lastName,
                mobile: registrationData.mobile,
                password: registrationData.password,
                otp: registrationData.otp
            });

            if (response.success) {
                window.utils.showToast('ط«ط¨طھâ€Œظ†ط§ظ… ط¨ط§ ظ…ظˆظپظ‚غŒطھ ط§ظ†ط¬ط§ظ… ط´ط¯', 'success');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000);
            } else {
                window.utils.showToast(response.error || 'ط®ط·ط§ ط¯ط± ط«ط¨طھâ€Œظ†ط§ظ…', 'error');
            }
        } catch (error) {
            console.error('Error completing registration:', error);
            window.utils.showToast('ط®ط·ط§ ط¯ط± ط§طھطµط§ظ„ ط¨ظ‡ ط³ط±ظˆط±', 'error');
        } finally {
            const submitButton = document.getElementById('completeRegistrationButton');
            window.utils.hideLoading(submitButton);
        }
    }

    // Password strength checker
    function checkPasswordStrength(showFeedback = false) {
        const password = document.getElementById('password').value;
        let strength = 0;
        const feedback = [];

        if (password.length >= 8) {
            strength++;
        } else {
            feedback.push('ط­ط¯ط§ظ‚ظ„ غ¸ ع©ط§ط±ط§ع©طھط±');
        }

        if (/[a-z]/.test(password)) {
            strength++;
        } else {
            feedback.push('ط­ط¯ط§ظ‚ظ„ غŒع© ط­ط±ظپ ع©ظˆع†ع©');
        }

        if (/[A-Z]/.test(password)) {
            strength++;
        } else {
            feedback.push('ط­ط¯ط§ظ‚ظ„ غŒع© ط­ط±ظپ ط¨ط²ط±ع¯');
        }

        if (/[0-9]/.test(password)) {
            strength++;
        } else {
            feedback.push('ط­ط¯ط§ظ‚ظ„ غŒع© ط¹ط¯ط¯');
        }

        if (/[^A-Za-z0-9]/.test(password)) {
            strength++;
        } else {
            feedback.push('ط­ط¯ط§ظ‚ظ„ غŒع© ع©ط§ط±ط§ع©طھط± ط®ط§طµ');
        }

        if (showFeedback && feedback.length > 0) {
            window.utils.showToast(feedback.join('طŒ '), 'info');
        }

        return strength;
    }

    // Toggle password visibility
    function togglePasswordVisibility(inputId) {
        const input = document.getElementById(inputId);
        const icon = document.querySelector(`[onclick="togglePasswordVisibility('${inputId}')"] i`);
        
        if (input.type === 'password') {
            input.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            input.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
        // Add event listeners
        const passwordInput = document.getElementById('password');
        if (passwordInput) {
            passwordInput.addEventListener('input', function() {
                checkPasswordStrength();
            });
        }

        // Auto-focus first input
        const firstInput = document.querySelector('input[required]');
        if (firstInput) {
            firstInput.focus();
        }
    });

    function prevStep(current, prev) {
        // Hide current step
        document.getElementById(`step${current}`).classList.remove('active');

        // Show previous step
        document.getElementById(`step${prev}`).classList.add('active');

        // Update step indicator
        updateStepIndicator(current, prev, false);
    }

    function updateStepIndicator(current, next, isNext = true) {
        // Update step circle
        document.querySelector(`.step-circle[data-step="${next}"]`).classList.remove('inactive');
        document.querySelector(`.step-circle[data-step="${next}"]`).classList.add('active');

        // Update connecting line
        if(isNext) {
            document.querySelectorAll('.step-line')[current-1].classList.add('active');
        } else {
            document.querySelectorAll('.step-line')[next-1].classList.remove('active');
            document.querySelector(`.step-circle[data-step="${current}"]`).classList.remove('active');
            document.querySelector(`.step-circle[data-step="${current}"]`).classList.add('inactive');
        }
    }

    function updateReviewSection() {
        document.getElementById('review-name').textContent =
            `${document.getElementById('first-name').value} ${document.getElementById('last-name').value}`;

        document.getElementById('review-mobile').textContent =
            document.getElementById('mobile').value;

        document.getElementById('review-email').textContent =
            document.getElementById('email').value || 'ظˆط§ط±ط¯ ظ†ط´ط¯ظ‡';
    }

    async function submitForm() {
        const terms = document.getElementById('terms').checked;

        if(!terms) {
            showRegisterError('ظ„ط·ظپط§ ط¨ط§ ظ‚ظˆط§ظ†غŒظ† ظˆ ظ…ظ‚ط±ط±ط§طھ ظ…ظˆط§ظپظ‚طھ ع©ظ†غŒط¯');
            return;
        }

        // Get form data
        const firstName = document.getElementById('first-name').value.trim();
        const lastName = document.getElementById('last-name').value.trim();
        const phone = document.getElementById('mobile').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;

        // Validate email in frontend
        if (!email) {
            showRegisterError('ظ„ط·ظپط§ ط§غŒظ…غŒظ„ ط±ط§ ظˆط§ط±ط¯ ع©ظ†غŒط¯');
            return;
        }

        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            showRegisterError('ظپط±ظ…طھ ط§غŒظ…غŒظ„ ظ…ط¹طھط¨ط± ظ†غŒط³طھ');
            return;
        }

        const formData = {
            firstName: firstName,
            lastName: lastName,
            phone: phone,
            email: email,
            password: password
        };

        // Show loading state
        const submitBtn = document.querySelector('[onclick="submitForm()"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.disabled = true;
        submitBtn.innerHTML = `
            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            ط¯ط± ط­ط§ظ„ ط«ط¨طھ ظ†ط§ظ…...
        `;

        try {
            const result = await authService.register(formData);

            if (result.success) {
                showRegisterSuccess('ط«ط¨طھ ظ†ط§ظ… ط´ظ…ط§ ط¨ط§ ظ…ظˆظپظ‚غŒطھ ط§ظ†ط¬ط§ظ… ط´ط¯!');
                // ط§ط±ط³ط§ظ„ ظ¾غŒط§ظ…ع© ط®ظˆط´â€Œط¢ظ…ط¯ع¯ظˆغŒغŒ ظ¾ط³ ط§ط² ط«ط¨طھâ€Œظ†ط§ظ… ظ…ظˆظپظ‚
                try {
                    if (phone) {
                        await authService.sendOTP(phone, 'welcome');
                        window.utils.showToast('ظ¾غŒط§ظ…ع© ط®ظˆط´â€Œط¢ظ…ط¯ع¯ظˆغŒغŒ ط§ط±ط³ط§ظ„ ط´ط¯', 'success');
                    }
                } catch (_) {
                    // ط¯ط± طµظˆط±طھ ط®ط·ط§ ط¯ط± ط§ط±ط³ط§ظ„ ظ¾غŒط§ظ…ع©طŒ ط±ظˆظ†ط¯ ع©ط§ط± ظ…طھظˆظ‚ظپ ظ†ط´ظˆط¯
                }
                
                // Clear form data after successful registration
                clearRegistrationForm();
                
                // Redirect to dashboard after short delay
                setTimeout(() => {
                    window.location.href = 'user-panel-index.html';
                }, 2000);
            } else {
                showRegisterError(result.error || 'ط®ط·ط§ ط¯ط± ط«ط¨طھ ظ†ط§ظ…. ظ„ط·ظپط§ ط¯ظˆط¨ط§ط±ظ‡ طھظ„ط§ط´ ع©ظ†غŒط¯.');
                // Clear sensitive fields (password) on error, but keep name/email for retry
                document.getElementById('password').value = '';
                document.getElementById('confirm-password').value = '';
            }
        } catch (error) {
            console.error('Registration error:', error);
            showRegisterError('ط®ط·ط§ ط¯ط± ط§طھطµط§ظ„ ط¨ظ‡ ط³ط±ظˆط±. ظ„ط·ظپط§ ط¯ظˆط¨ط§ط±ظ‡ طھظ„ط§ط´ ع©ظ†غŒط¯.');
            // Clear sensitive fields on error
            document.getElementById('password').value = '';
            document.getElementById('confirm-password').value = '';
        } finally {
            // Reset button state
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalText;
        }
    }

    // Function to show register error message
    function showRegisterError(message) {
        // Remove existing error messages
        const existingErrors = document.querySelectorAll('.register-error-message');
        existingErrors.forEach(el => el.remove());

        const errorDiv = document.createElement('div');
        errorDiv.className = 'register-error-message mb-4 p-4 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 rounded-xl border border-red-200 dark:border-red-800';
        errorDiv.innerHTML = `
            <div class="flex items-center">
                <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                </svg>
                ${message}
            </div>
        `;

        // Insert error message at the top of the form
        const form = document.querySelector('.bg-white.dark\\:bg-gray-800');
        if (form) {
            form.insertBefore(errorDiv, form.firstChild);
        }

        // Automatically remove error message after 5 seconds
        setTimeout(() => {
            errorDiv.remove();
        }, 5000);
    }

    // Function to show register success message
    function showRegisterSuccess(message) {
        // Remove existing messages
        const existingMessages = document.querySelectorAll('.register-success-message, .register-error-message');
        existingMessages.forEach(el => el.remove());

        const successDiv = document.createElement('div');
        successDiv.className = 'register-success-message mb-4 p-4 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-300 rounded-xl border border-green-200 dark:border-green-800';
        successDiv.innerHTML = `
            <div class="flex items-center">
                <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                ${message}
            </div>
        `;

        // Insert success message at the top of the form
        const form = document.querySelector('.bg-white.dark\\:bg-gray-800');
        if (form) {
            form.insertBefore(successDiv, form.firstChild);
        }

        // Automatically remove success message after 3 seconds
        setTimeout(() => {
            successDiv.remove();
        }, 3000);
    }

    // Show/hide password function
    function togglePassword(id) {
        const passwordInput = document.getElementById(id);
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
    }

    // Password strength checker function
    function checkPasswordStrength(silent = false) {
        const password = document.getElementById('password').value;
        const strengthBar = document.getElementById('password-strength-bar');

        // Check password conditions
        const hasMinLength = password.length >= 8;
        const hasUpperCase = /[A-Z]/.test(password);
        const hasLowerCase = /[a-z]/.test(password);
        const hasNumber = /[0-9]/.test(password);
        const hasSpecialChar = /[!@#$%^&*]/.test(password);

        // Update requirement indicators
        updateRequirement('req-length', hasMinLength);
        updateRequirement('req-uppercase', hasUpperCase);
        updateRequirement('req-lowercase', hasLowerCase);
        updateRequirement('req-number', hasNumber);
        updateRequirement('req-special', hasSpecialChar);

        // Calculate password strength
        let strength = 0;
        if(hasMinLength) strength++;
        if(hasUpperCase) strength++;
        if(hasLowerCase) strength++;
        if(hasNumber) strength++;
        if(hasSpecialChar) strength++;

        // Update strength bar
        strengthBar.className = 'password-strength-bar';

        if(password.length === 0) {
            strengthBar.style.width = '0';
        } else {
            switch(strength) {
                case 1:
                    strengthBar.classList.add('password-strength-weak');
                    break;
                case 2:
                    strengthBar.classList.add('password-strength-weak');
                    break;
                case 3:
                    strengthBar.classList.add('password-strength-medium');
                    break;
                case 4:
                    strengthBar.classList.add('password-strength-medium');
                    break;
                case 5:
                    strengthBar.classList.add('password-strength-strong');
                    break;
                default:
                    strengthBar.style.width = '0';
            }
        }

        // Check if password matches
        checkPasswordMatch();

        return strength;
    }

    function updateRequirement(id, isValid) {
        const element = document.getElementById(id);
        element.classList.remove('valid', 'invalid');
        element.classList.add(isValid ? 'valid' : 'invalid');
    }

    // Password match checker function
    function checkPasswordMatch() {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirm-password').value;
        const messageElement = document.getElementById('password-match-message');

        if(password && confirmPassword) {
            if(password === confirmPassword) {
                messageElement.textContent = 'ط±ظ…ط² ط¹ط¨ظˆط±ظ‡ط§ ظ…ط·ط§ط¨ظ‚طھ ط¯ط§ط±ظ†ط¯';
                messageElement.style.color = '#10B981';
            } else {
                messageElement.textContent = 'ط±ظ…ط² ط¹ط¨ظˆط±ظ‡ط§ ظ…ط·ط§ط¨ظ‚طھ ظ†ط¯ط§ط±ظ†ط¯';
                messageElement.style.color = '#EF4444';
            }
        } else {
            messageElement.textContent = '';
        }
    }
</script>

</body>
</html>

    }



    // Start OTP timer

    function startOtpTimer() {

        let timeLeft = 120; // 2 minutes

        const timerElement = document.getElementById('otpTimer');

        const resendButton = document.getElementById('resendOtpButton');



        const timer = setInterval(() => {

            const minutes = Math.floor(timeLeft / 60);

            const seconds = timeLeft % 60;

            

            timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

            

            if (timeLeft <= 0) {

                clearInterval(timer);

                timerElement.style.display = 'none';

                resendButton.style.display = 'inline-block';

            }

            

            timeLeft--;

        }, 1000);

    }



    // Resend OTP

    async function resendOTP() {

        await sendOTP();

    }



    // Complete registration

    async function completeRegistration() {

        if (!validateStep3()) {

            return;

        }



        try {

            const submitButton = document.getElementById('completeRegistrationButton');

            window.utils.showLoading(submitButton, 'ط¯ط± ط­ط§ظ„ ط«ط¨طھâ€Œظ†ط§ظ…...');



            const response = await window.authService.registerWithPhone({

                firstName: registrationData.firstName,

                lastName: registrationData.lastName,

                mobile: registrationData.mobile,

                password: registrationData.password,

                otp: registrationData.otp

            });



            if (response.success) {

                window.utils.showToast('ط«ط¨طھâ€Œظ†ط§ظ… ط¨ط§ ظ…ظˆظپظ‚غŒطھ ط§ظ†ط¬ط§ظ… ط´ط¯', 'success');

                setTimeout(() => {

                    window.location.href = 'login.html';

                }, 2000);

            } else {

                window.utils.showToast(response.error || 'ط®ط·ط§ ط¯ط± ط«ط¨طھâ€Œظ†ط§ظ…', 'error');

            }

        } catch (error) {

            console.error('Error completing registration:', error);

            window.utils.showToast('ط®ط·ط§ ط¯ط± ط§طھطµط§ظ„ ط¨ظ‡ ط³ط±ظˆط±', 'error');

        } finally {

            const submitButton = document.getElementById('completeRegistrationButton');

            window.utils.hideLoading(submitButton);

        }

    }



    // Password strength checker

    function checkPasswordStrength(showFeedback = false) {

        const password = document.getElementById('password').value;

        let strength = 0;

        const feedback = [];



        if (password.length >= 8) {

            strength++;

        } else {

            feedback.push('ط­ط¯ط§ظ‚ظ„ غ¸ ع©ط§ط±ط§ع©طھط±');

        }



        if (/[a-z]/.test(password)) {

            strength++;

        } else {

            feedback.push('ط­ط¯ط§ظ‚ظ„ غŒع© ط­ط±ظپ ع©ظˆع†ع©');

        }



        if (/[A-Z]/.test(password)) {

            strength++;

        } else {

            feedback.push('ط­ط¯ط§ظ‚ظ„ غŒع© ط­ط±ظپ ط¨ط²ط±ع¯');

        }



        if (/[0-9]/.test(password)) {

            strength++;

        } else {

            feedback.push('ط­ط¯ط§ظ‚ظ„ غŒع© ط¹ط¯ط¯');

        }



        if (/[^A-Za-z0-9]/.test(password)) {

            strength++;

        } else {

            feedback.push('ط­ط¯ط§ظ‚ظ„ غŒع© ع©ط§ط±ط§ع©طھط± ط®ط§طµ');

        }



        if (showFeedback && feedback.length > 0) {

            window.utils.showToast(feedback.join('طŒ '), 'info');

        }



        return strength;

    }



    // Toggle password visibility

    function togglePasswordVisibility(inputId) {

        const input = document.getElementById(inputId);

        const icon = document.querySelector(`[onclick="togglePasswordVisibility('${inputId}')"] i`);

        

        if (input.type === 'password') {

            input.type = 'text';

            icon.classList.remove('fa-eye');

            icon.classList.add('fa-eye-slash');

        } else {

            input.type = 'password';

            icon.classList.remove('fa-eye-slash');

            icon.classList.add('fa-eye');

        }

    }



    // Initialize page

    document.addEventListener('DOMContentLoaded', function() {

        // Add event listeners

        const passwordInput = document.getElementById('password');

        if (passwordInput) {

            passwordInput.addEventListener('input', function() {

                checkPasswordStrength();

            });

        }



        // Auto-focus first input

        const firstInput = document.querySelector('input[required]');

        if (firstInput) {

            firstInput.focus();

        }

    });



        // Update step indicator

        updateStepIndicator(current, next);



        // If next step is review, show the info

        if(next === 3) {

            updateReviewSection();

        }

    }



    function prevStep(current, prev) {

        // Hide current step

        document.getElementById(`step${current}`).classList.remove('active');



        // Show previous step

        document.getElementById(`step${prev}`).classList.add('active');



        // Update step indicator

        updateStepIndicator(current, prev, false);

    }



    function updateStepIndicator(current, next, isNext = true) {

        // Update step circle

        document.querySelector(`.step-circle[data-step="${next}"]`).classList.remove('inactive');

        document.querySelector(`.step-circle[data-step="${next}"]`).classList.add('active');



        // Update connecting line

        if(isNext) {

            document.querySelectorAll('.step-line')[current-1].classList.add('active');

        } else {

            document.querySelectorAll('.step-line')[next-1].classList.remove('active');

            document.querySelector(`.step-circle[data-step="${current}"]`).classList.remove('active');

            document.querySelector(`.step-circle[data-step="${current}"]`).classList.add('inactive');

        }

    }



    function updateReviewSection() {

        document.getElementById('review-name').textContent =

            `${document.getElementById('first-name').value} ${document.getElementById('last-name').value}`;



        document.getElementById('review-mobile').textContent =

            document.getElementById('mobile').value;



        document.getElementById('review-email').textContent =

            document.getElementById('email').value || 'ظˆط§ط±ط¯ ظ†ط´ط¯ظ‡';

    }



    async function submitForm() {

        const terms = document.getElementById('terms').checked;



        if(!terms) {

            showRegisterError('ظ„ط·ظپط§ ط¨ط§ ظ‚ظˆط§ظ†غŒظ† ظˆ ظ…ظ‚ط±ط±ط§طھ ظ…ظˆط§ظپظ‚طھ ع©ظ†غŒط¯');

            return;

        }



        // Get form data

        const formData = {

            firstName: document.getElementById('first-name').value,

            lastName: document.getElementById('last-name').value,

            phone: document.getElementById('mobile').value,

            email: document.getElementById('email').value || null,

            password: document.getElementById('password').value

        };



        // Show loading state

        const submitBtn = document.querySelector('[onclick="submitForm()"]');

        const originalText = submitBtn.innerHTML;

        submitBtn.disabled = true;

        submitBtn.innerHTML = `

            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">

                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>

                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>

            </svg>

            ط¯ط± ط­ط§ظ„ ط«ط¨طھ ظ†ط§ظ…...

        `;



        try {

            const result = await authService.register(formData);



            if (result.success) {

                showRegisterSuccess('ط«ط¨طھ ظ†ط§ظ… ط´ظ…ط§ ط¨ط§ ظ…ظˆظپظ‚غŒطھ ط§ظ†ط¬ط§ظ… ط´ط¯!');

                

                // Redirect to dashboard after short delay

                setTimeout(() => {

                    window.location.href = '/user-panel-index.html';

                }, 2000);

            } else {

                showRegisterError(result.error || 'ط®ط·ط§ ط¯ط± ط«ط¨طھ ظ†ط§ظ…. ظ„ط·ظپط§ ط¯ظˆط¨ط§ط±ظ‡ طھظ„ط§ط´ ع©ظ†غŒط¯.');

            }

        } catch (error) {

            console.error('Registration error:', error);

            showRegisterError('ط®ط·ط§ ط¯ط± ط§طھطµط§ظ„ ط¨ظ‡ ط³ط±ظˆط±. ظ„ط·ظپط§ ط¯ظˆط¨ط§ط±ظ‡ طھظ„ط§ط´ ع©ظ†غŒط¯.');

        } finally {

            // Reset button state

            submitBtn.disabled = false;

            submitBtn.innerHTML = originalText;

        }

    }



    // Function to show register error message

    function showRegisterError(message) {

        // Remove existing error messages

        const existingErrors = document.querySelectorAll('.register-error-message');

        existingErrors.forEach(el => el.remove());



        const errorDiv = document.createElement('div');

        errorDiv.className = 'register-error-message mb-4 p-4 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 rounded-xl border border-red-200 dark:border-red-800';

        errorDiv.innerHTML = `

            <div class="flex items-center">

                <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">

                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>

                </svg>

                ${message}

            </div>

        `;



        // Insert error message at the top of the form

        const form = document.querySelector('.registration-form');

        form.insertBefore(errorDiv, form.firstChild);



        // Automatically remove error message after 5 seconds

        setTimeout(() => {

            errorDiv.remove();

        }, 5000);

    }



    // Function to show register success message

    function showRegisterSuccess(message) {

        // Remove existing messages

        const existingMessages = document.querySelectorAll('.register-success-message, .register-error-message');

        existingMessages.forEach(el => el.remove());



        const successDiv = document.createElement('div');

        successDiv.className = 'register-success-message mb-4 p-4 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-300 rounded-xl border border-green-200 dark:border-green-800';

        successDiv.innerHTML = `

            <div class="flex items-center">

                <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">

                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>

                </svg>

                ${message}

            </div>

        `;



        // Insert success message at the top of the form

        const form = document.querySelector('.registration-form');

        form.insertBefore(successDiv, form.firstChild);



        // Automatically remove success message after 3 seconds

        setTimeout(() => {

            successDiv.remove();

        }, 3000);

    }



    // Show/hide password function

    function togglePassword(id) {

        const passwordInput = document.getElementById(id);

        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';

        passwordInput.setAttribute('type', type);

    }



    // Password strength checker function

    function checkPasswordStrength(silent = false) {

        const password = document.getElementById('password').value;

        const strengthBar = document.getElementById('password-strength-bar');



        // Check password conditions

        const hasMinLength = password.length >= 8;

        const hasUpperCase = /[A-Z]/.test(password);

        const hasLowerCase = /[a-z]/.test(password);

        const hasNumber = /[0-9]/.test(password);

        const hasSpecialChar = /[!@#$%^&*]/.test(password);



        // Update requirement indicators

        updateRequirement('req-length', hasMinLength);

        updateRequirement('req-uppercase', hasUpperCase);

        updateRequirement('req-lowercase', hasLowerCase);

        updateRequirement('req-number', hasNumber);

        updateRequirement('req-special', hasSpecialChar);



        // Calculate password strength

        let strength = 0;

        if(hasMinLength) strength++;

        if(hasUpperCase) strength++;

        if(hasLowerCase) strength++;

        if(hasNumber) strength++;

        if(hasSpecialChar) strength++;



        // Update strength bar

        strengthBar.className = 'password-strength-bar';



        if(password.length === 0) {

            strengthBar.style.width = '0';

        } else {

            switch(strength) {

                case 1:

                    strengthBar.classList.add('password-strength-weak');

                    break;

                case 2:

                    strengthBar.classList.add('password-strength-weak');

                    break;

                case 3:

                    strengthBar.classList.add('password-strength-medium');

                    break;

                case 4:

                    strengthBar.classList.add('password-strength-medium');

                    break;

                case 5:

                    strengthBar.classList.add('password-strength-strong');

                    break;

                default:

                    strengthBar.style.width = '0';

            }

        }



        // Check if password matches

        checkPasswordMatch();



        return strength;

    }



    function updateRequirement(id, isValid) {

        const element = document.getElementById(id);

        element.classList.remove('valid', 'invalid');

        element.classList.add(isValid ? 'valid' : 'invalid');

    }



    // Password match checker function

    function checkPasswordMatch() {

        const password = document.getElementById('password').value;

        const confirmPassword = document.getElementById('confirm-password').value;

        const messageElement = document.getElementById('password-match-message');



        if(password && confirmPassword) {

            if(password === confirmPassword) {

                messageElement.textContent = 'ط±ظ…ط² ط¹ط¨ظˆط±ظ‡ط§ ظ…ط·ط§ط¨ظ‚طھ ط¯ط§ط±ظ†ط¯';

                messageElement.style.color = '#10B981';

            } else {

                messageElement.textContent = 'ط±ظ…ط² ط¹ط¨ظˆط±ظ‡ط§ ظ…ط·ط§ط¨ظ‚طھ ظ†ط¯ط§ط±ظ†ط¯';

                messageElement.style.color = '#EF4444';

            }

        } else {

            messageElement.textContent = '';

        }

    }



</script>



</body>

</html>




